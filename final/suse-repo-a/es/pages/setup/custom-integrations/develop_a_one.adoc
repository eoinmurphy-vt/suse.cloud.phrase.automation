ifdef::ss-ff-stackpacks2_enabled[]
= Tutorial: Desarrollar una integraci√≥n personalizada (StackPack)
:revdate: 2026-01-08
:page-revdate: {revdate}
:description:  Desarrollar una integraci√≥n personalizada (StackPack)

[IMPORTANT]
====
Este reportaje est√° en fase de preproducci√≥n y no se ha estrenado. S√≥lo est√° disponible si la variable de entorno `STS_EXPERIMENTAL_STACKPACK` est√° activada. Pueden producirse cambios bruscos.
====

== Objetivo

Como desarrollador, desea integrar su tecnolog√≠a con {stackstate-product-name} creando un StackPack personalizado. Este tutorial le guiar√° a trav√©s del proceso utilizando la CLI de StackPack.

== Requisitos previos

- Acceso al xref:/setup/cli/cli-sts.adoc[StackPack CLI]
- Bandera de funci√≥n activada:
+
[source,bash]
----
export STS_EXPERIMENTAL_STACKPACK=true
----


== C√≥mo desarrollar una integraci√≥n personalizada (StackPack)

=== Crear un nuevo StackPack

El subcomando `scaffold` crea una nueva estructura de proyecto StackPack a partir de plantillas configurables, agilizando el proceso de configuraci√≥n inicial para el desarrollo de StackPack. El comando admite tanto plantillas de directorios locales como plantillas alojadas en GitHub.

- Cree un nuevo proyecto StackPack utilizando la CLI:
+
[source,bash]
----
sts stackpack scaffold --name my-stackpack
----

- Para utilizar una plantilla espec√≠fica de GitHub (por defecto: https://github.com/StackVista/stackpack-templates[stackvista/stackpack-templates]):
+
[source,bash]
----
sts stackpack scaffold --name my-stackpack --template-github-repo stackvista/stackpack-templates --template-name microservice --destination-dir stackpack
‚úì Validating arguments...
‚úì Checking destination directory...
‚úì Fetching template from github:stackvista/stackpack-templates@main:templates
‚úì Rendering templates...
‚úì Validating rendered templates...
‚úì Copying files to destination...
Files copied:
  README.md
  provisioning/dashboard.sty
  provisioning/metricbindings.sty
  provisioning/monitors.sty
  provisioning/remediation-hints/node-memory-pressure.md.hbs
  provisioning/stackpack.sty
  resources/deprovisioning.md
  resources/error.md
  resources/installed.md
  resources/logo.png
  resources/notinstalled.md
  resources/overview.md
  resources/provisioning.md
  resources/waitingfordata.md
  stackpack.yaml

‚úÖ ‚úì Scaffold complete!

Next steps:
1. Review the generated files in: ./my-stackpack
2. Check the ./my-stackpack/README.md for instructions on what to do next.
...
----

+
- Para utilizar una plantilla local:
+
[source,bash]
----
sts stackpack scaffold --name my-stackpack --template-local-dir ./templates --template-name webapp
----


=== Revisar y personalizar

- Revise los archivos generados en el directorio de destino.
- Edite `stackpack.yaml` y otros archivos para definir su l√≥gica de integraci√≥n.
  * Integraci√≥n de datos. Para asignar componentes y m√©tricas de ingesta, consulte xref:setup/custom-integrations/otelmappings/README.adoc[A√±adir asignaciones de telemetr√≠a de Otel].
  * xref:setup/custom-integrations/monitors/index.adoc[A√±adir monitores]
  * xref:setup/custom-integrations/metric-bindings/index.adoc[A√±adir fijaciones m√©tricas]

[NOTE]
====
La plantilla por defecto: https://github.com/StackVista/stackpack-templates[stackvista/stackpack-templates] es un gran punto de partida ya que contiene ejemplos para la mayor√≠a de los puntos de extensi√≥n como Monitores y Metric Bindings.
====

=== Pruebe su StackPack

El comando de subcomando `test` que agiliza el flujo de trabajo de desarrollo de stackpack automatizando la secuencia paquete ‚Üí cargar ‚Üí instalar/actualizar con gesti√≥n autom√°tica de versiones para iteraciones de prueba.

- Pruebe r√°pidamente su StackPack en un entorno de preproducci√≥n (requiere una instancia de Suse Observability en ejecuci√≥n):
+
[source,bash]
----
sts stackpack test -d ./my-stackpack --yes
‚úÖ Starting stackpack test sequence...
  Stackpack: my-stackpack (current version: 0.0.1)

Step 1/5: Checking installed version...

Step 2/5: Creating temporary copy for testing...
‚úÖ ‚úì Temporary copy created

Step 3/5: Bumping version for testing...
‚úÖ ‚úì Version bumped to: 0.0.1-cli-test.10000

Step 4/5: Packaging stackpack...
‚úÖ ‚úì Stackpack packaged successfully!

Stackpack: my-stackpack (v0.0.1-cli-test.10000)
Zip file: /Users/viliakov/Workspace/src/github/stackstate-cli/my-stackpack/my-stackpack-0.0.1-cli-test.10000.zip
‚úÖ ‚úì Stackpack packaged successfully

Step 5/5: Uploading and installing/upgrading stackpack...
‚úÖ Uploaded StackPack: /Users/viliakov/Workspace/src/github/stackstate-cli/my-stackpack/my-stackpack-0.0.1-cli-test.10000.zip
NAME              | DISPLAY NAME      | VERSION
my-stackpack | my-stackpack | 0.0.1-cli-test.10000
‚úÖ ‚úì Stackpack uploaded successfully
‚úÖ StackPack instance installed
ID             | NAME | STATUS      | VERSION         | LAST UPDATED
274027256960772 | -    | PROVISIONING | 0.0.1-cli-test.1 | Fri Aug 29 09:10
                |      |              | 0000             | :26 2025 CEST
‚úÖ ‚úì Stackpack installed successfully

‚úÖ üéâ Test sequence completed successfully!
----

- El subcomando `test` empaqueta, carga e instala su StackPack con un sufijo de versi√≥n de prueba.
- Itere en su StackPack, usando el comando `test` para una r√°pida retroalimentaci√≥n, haga cambios y observe que el proceso de instalaci√≥n/actualizaci√≥n se ejecute con √©xito. Revise la topolog√≠a ingestada y la telemetr√≠a en la interfaz de usuario de Suse Observability.

=== Paquete Su versi√≥n StackPack terminada

El subcomando `package` crea un archivo zip a partir de los directorios de stackpack. Este comando empaqueta todos los archivos y directorios stackpack necesarios en un archivo zip con el nombre adecuado para su distribuci√≥n y despliegue.

- Empaquete su StackPack en un zip distribuible:
+
[source,bash]
----
sts stackpack package -d ./my-stackpack
‚úÖ ‚úì Stackpack packaged successfully!

Stackpack: stackpack (v0.0.1)
Zip file: /Users/viliakov/Workspace/src/github/stackstate-cli/my-stackpack/my-stackpack-0.0.1-cli-test.zip
----

- Para especificar el archivo de salida:
+
[source,bash]
----
sts stackpack package -d ./my-stackpack -f my-custom-archive.zip
----

=== Sube tu StackPack

El subcomando `upload` env√≠a el archivo zip a una instancia de {stackstate-product-name} en ejecuci√≥n.

- Sube el archivo a {stackstate-product-name}:
+
[source,bash]
----
sts stackpack upload -f ./my-stackpack-0.0.1.zip
‚úÖ ‚úì Stackpack uploaded successfully!
----

=== Instalar el StackPack

xref:/stackpacks/about-stackpacks.adoc#_install_or_uninstall_a_stackpack[Instale o actualice su StackPack] a trav√©s de la interfaz de usuario de stackpacks de {stackstate-product-name}.

endif::ss-ff-stackpacks2_enabled[]
