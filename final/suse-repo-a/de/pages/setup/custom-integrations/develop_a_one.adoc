ifdef::ss-ff-stackpacks2_enabled[]
= Anleitung: Entwickeln Sie eine benutzerdefinierte Integration (StackPack).
:revdate: 2026-01-08
:page-revdate: {revdate}
:description:  Entwickeln Sie eine benutzerdefinierte Integration (StackPack).

[IMPORTANT]
====
Dieses Feature befindet sich in der Vorproduktionsphase und ist noch nicht verÃ¶ffentlicht. Es ist nur verfÃ¼gbar, wenn die Umgebungsvariable `STS_EXPERIMENTAL_STACKPACK` gesetzt ist. Es kÃ¶nnen einschneidende Ã„nderungen auftreten.
====

== Zielwert

Als Entwickler mÃ¶chten Sie Ihre Technologie mit {stackstate-product-name} integrieren, indem Sie ein benutzerdefiniertes StackPack erstellen. Dieses Tutorial fÃ¼hrt Sie durch den Prozess mit der StackPack CLI.

== Voraussetzungen

- Zugriff auf die xref:/setup/cli/cli-sts.adoc[StackPack CLI]
- Feature-Flag aktiviert:
+
[source,bash]
----
export STS_EXPERIMENTAL_STACKPACK=true
----


== So entwickeln Sie eine benutzerdefinierte Integration (StackPack)

=== Ein neues StackPack einrichten

Der `scaffold` Unterbefehl erstellt eine neue StackPack-Projektstruktur aus konfigurierbaren Vorlagen und vereinfacht den anfÃ¤nglichen Einrichtungsprozess fÃ¼r die StackPack-Entwicklung. Der Befehl unterstÃ¼tzt sowohl lokale Verzeichnisvorlagen als auch auf GitHub gehostete Vorlagen.

- Erstellen Sie ein neues StackPack-Projekt mit der CLI:
+
[source,bash]
----
sts stackpack scaffold --name my-stackpack
----

- Um eine bestimmte GitHub-Vorlage zu verwenden (Standard: https://github.com/StackVista/stackpack-templates[stackvista/stackpack-templates]):
+
[source,bash]
----
sts stackpack scaffold --name my-stackpack --template-github-repo stackvista/stackpack-templates --template-name microservice --destination-dir stackpack
âœ“ Validating arguments...
âœ“ Checking destination directory...
âœ“ Fetching template from github:stackvista/stackpack-templates@main:templates
âœ“ Rendering templates...
âœ“ Validating rendered templates...
âœ“ Copying files to destination...
Files copied:
  README.md
  provisioning/dashboard.sty
  provisioning/metricbindings.sty
  provisioning/monitors.sty
  provisioning/remediation-hints/node-memory-pressure.md.hbs
  provisioning/stackpack.sty
  resources/deprovisioning.md
  resources/error.md
  resources/installed.md
  resources/logo.png
  resources/notinstalled.md
  resources/overview.md
  resources/provisioning.md
  resources/waitingfordata.md
  stackpack.yaml

âœ… âœ“ Scaffold complete!

Next steps:
1. Review the generated files in: ./my-stackpack
2. Check the ./my-stackpack/README.md for instructions on what to do next.
...
----

+
- Um eine lokale Vorlage zu verwenden:
+
[source,bash]
----
sts stackpack scaffold --name my-stackpack --template-local-dir ./templates --template-name webapp
----


=== ÃœberprÃ¼fen und Anpassen

- ÃœberprÃ¼fen Sie die generierten Dateien im Zielverzeichnis.
- Bearbeiten Sie `stackpack.yaml` und andere Dateien, um Ihre Integrationslogik zu definieren.
  * Daten werden integriert. Um Komponenten zuzuordnen und Metriken zu erfassen, siehe xref:setup/custom-integrations/otelmappings/README.adoc[HinzufÃ¼gen von Otel Telemetrie-Mappings]
  * xref:setup/custom-integrations/monitors/index.adoc[Monitore hinzufÃ¼gen]
  * xref:setup/custom-integrations/metric-bindings/index.adoc[Metric-Bindungen hinzufÃ¼gen]

[NOTE]
====
Die Standardvorlage: https://github.com/StackVista/stackpack-templates[stackvista/stackpack-templates] ist ein groÃŸartiger Ausgangspunkt, da sie Beispiele fÃ¼r die meisten Erweiterungspunkte wie Monitore und Metric-Bindungen enthÃ¤lt.
====

=== Testen Sie Ihr StackPack

Der `test` Unterbefehl optimiert den Stackpack-Entwicklungsworkflow, indem er die Paket â†’ Hochladen â†’ Installieren/Upgrade-Sequenz mit automatischer Versionsverwaltung fÃ¼r Testiterationen vereinfacht.

- Testen Sie Ihr StackPack schnell in einer Vorproduktionsumgebung (benÃ¶tigt eine laufende Suse-Observability-Instanz):
+
[source,bash]
----
sts stackpack test -d ./my-stackpack --yes
âœ… Starting stackpack test sequence...
  Stackpack: my-stackpack (current version: 0.0.1)

Step 1/5: Checking installed version...

Step 2/5: Creating temporary copy for testing...
âœ… âœ“ Temporary copy created

Step 3/5: Bumping version for testing...
âœ… âœ“ Version bumped to: 0.0.1-cli-test.10000

Step 4/5: Packaging stackpack...
âœ… âœ“ Stackpack packaged successfully!

Stackpack: my-stackpack (v0.0.1-cli-test.10000)
Zip file: /Users/viliakov/Workspace/src/github/stackstate-cli/my-stackpack/my-stackpack-0.0.1-cli-test.10000.zip
âœ… âœ“ Stackpack packaged successfully

Step 5/5: Uploading and installing/upgrading stackpack...
âœ… Uploaded StackPack: /Users/viliakov/Workspace/src/github/stackstate-cli/my-stackpack/my-stackpack-0.0.1-cli-test.10000.zip
NAME              | DISPLAY NAME      | VERSION
my-stackpack | my-stackpack | 0.0.1-cli-test.10000
âœ… âœ“ Stackpack uploaded successfully
âœ… StackPack instance installed
ID             | NAME | STATUS      | VERSION         | LAST UPDATED
274027256960772 | -    | PROVISIONING | 0.0.1-cli-test.1 | Fri Aug 29 09:10
                |      |              | 0000             | :26 2025 CEST
âœ… âœ“ Stackpack installed successfully

âœ… ðŸŽ‰ Test sequence completed successfully!
----

- Der `test` Unterbefehl paketiert, lÃ¤dt hoch und installiert Ihr StackPack mit einem Testversionssuffix.
- Arbeiten Sie an Ihrem StackPack weiter, verwenden Sie den `test`-Befehl fÃ¼r schnelles Feedback, nehmen Sie Ã„nderungen vor und beobachten Sie, wie der Installations-/Upgrade-Prozess erfolgreich ausgefÃ¼hrt wird. ÃœberprÃ¼fen Sie die aufgenommene Topologie und Telemetrie in der Suse Observability-BenutzeroberflÃ¤che.

=== Paketieren Sie Ihre fertige StackPack-Version

Der `package` Unterbefehl erstellt eine ZIP-Datei aus Stackpack-Verzeichnissen. Dieser Befehl packt alle erforderlichen Stackpack-Dateien und -Verzeichnisse in ein ordnungsgemÃ¤ÃŸ benanntes ZIP-Archiv fÃ¼r Distribution und Bereitstellung.

- Paketieren Sie Ihr StackPack in ein verteilbares ZIP-Archiv:
+
[source,bash]
----
sts stackpack package -d ./my-stackpack
âœ… âœ“ Stackpack packaged successfully!

Stackpack: stackpack (v0.0.1)
Zip file: /Users/viliakov/Workspace/src/github/stackstate-cli/my-stackpack/my-stackpack-0.0.1-cli-test.zip
----

- Um die Ausgabedatei anzugeben:
+
[source,bash]
----
sts stackpack package -d ./my-stackpack -f my-custom-archive.zip
----

=== Laden Sie Ihr StackPack hoch

Der `upload` Unterbefehl Ã¼bertrÃ¤gt das ZIP-Archiv an eine laufende {stackstate-product-name} Instanz.

- Laden Sie das Archiv auf {stackstate-product-name} hoch:
+
[source,bash]
----
sts stackpack upload -f ./my-stackpack-0.0.1.zip
âœ… âœ“ Stackpack uploaded successfully!
----

=== Installieren Sie das StackPack

xref:/stackpacks/about-stackpacks.adoc#_install_or_uninstall_a_stackpack[Installieren oder upgraden Sie Ihr StackPack] Ã¼ber die {stackstate-product-name} StackPacks-BenutzeroberflÃ¤che.

endif::ss-ff-stackpacks2_enabled[]
