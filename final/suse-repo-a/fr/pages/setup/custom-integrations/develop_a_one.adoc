ifdef::ss-ff-stackpacks2_enabled[]
= Didacticiel : D√©velopper une int√©gration personnalis√©e (StackPack)
:revdate: 2026-01-08
:page-revdate: {revdate}
:description:  D√©velopper une int√©gration personnalis√©e (StackPack)

[IMPORTANT]
====
Cette fonctionnalit√© est en pr√©-production et non publi√©e. Elle n'est disponible que si la variable d'environnement `STS_EXPERIMENTAL_STACKPACK` est d√©finie. Des changements incompatibles peuvent survenir.
====

== Objectif

En tant que d√©veloppeur, vous souhaitez int√©grer votre technologie √† {stackstate-product-name} en construisant un StackPack personnalis√©. Ce didacticiel vous guide dans le processus en utilisant le StackPack CLI.

== Conditions pr√©alables

- Acc√®s au xref:/setup/cli/cli-sts.adoc[StackPack CLI]
- Feature flag activ√© :
+
[source,bash]
----
export STS_EXPERIMENTAL_STACKPACK=true
----


== Comment d√©velopper une int√©gration personnalis√©e (StackPack)

=== Cr√©er un nouveau StackPack

La sous-commande `scaffold` cr√©e une nouvelle structure de projet StackPack √† partir de mod√®les configurables, simplifiant le processus de configuration initiale pour le d√©veloppement de StackPack. La commande prend en charge √† la fois les mod√®les de r√©pertoire local et les mod√®les h√©berg√©s sur GitHub.

- Cr√©er un nouveau projet StackPack en utilisant la CLI¬†:
+
[source,bash]
----
sts stackpack scaffold --name my-stackpack
----

- Pour utiliser un mod√®le GitHub sp√©cifique (par d√©faut : https://github.com/StackVista/stackpack-templates[stackvista/stackpack-templates]):
+
[source,bash]
----
sts stackpack scaffold --name my-stackpack --template-github-repo stackvista/stackpack-templates --template-name microservice --destination-dir stackpack
‚úì Validating arguments...
‚úì Checking destination directory...
‚úì Fetching template from github:stackvista/stackpack-templates@main:templates
‚úì Rendering templates...
‚úì Validating rendered templates...
‚úì Copying files to destination...
Files copied:
  README.md
  provisioning/dashboard.sty
  provisioning/metricbindings.sty
  provisioning/monitors.sty
  provisioning/remediation-hints/node-memory-pressure.md.hbs
  provisioning/stackpack.sty
  resources/deprovisioning.md
  resources/error.md
  resources/installed.md
  resources/logo.png
  resources/notinstalled.md
  resources/overview.md
  resources/provisioning.md
  resources/waitingfordata.md
  stackpack.yaml

‚úÖ ‚úì Scaffold complete!

Next steps:
1. Review the generated files in: ./my-stackpack
2. Check the ./my-stackpack/README.md for instructions on what to do next.
...
----

+
- Pour utiliser un mod√®le local :
+
[source,bash]
----
sts stackpack scaffold --name my-stackpack --template-local-dir ./templates --template-name webapp
----


=== R√©viser et Personnaliser

- V√©rifiez les fichiers g√©n√©r√©s dans le r√©pertoire cible¬†.
- Modifiez `stackpack.yaml` et d'autres fichiers pour d√©finir votre logique d'int√©gration.
  * Int√©grer des donn√©es. Pour mapper les composants et ing√©rer les m√©triques, voir xref:setup/custom-integrations/otelmappings/README.adoc[Ajout de mappages de t√©l√©m√©trie Otel]
  * xref:setup/custom-integrations/monitors/index.adoc[Ajouter des moniteurs]
  * xref:setup/custom-integrations/metric-bindings/index.adoc[Ajouter des liaisons de m√©triques]

[NOTE]
====
Le mod√®le par d√©faut : https://github.com/StackVista/stackpack-templates[stackvista/stackpack-templates] est un excellent point de d√©part, car il contient des exemples pour la plupart des points d'extension tels que les moniteurs et les liaisons de m√©triques.
====

=== Testez votre StackPack

La sous-commande `test` qui rationalise le flux de travail de d√©veloppement de StackPack en automatisant la s√©quence package ‚Üí t√©l√©chargement ‚Üí installation/mise √† niveau avec gestion automatique des versions pour les it√©rations de test.

- Testez rapidement votre StackPack dans un environnement de pr√©-production (n√©cessite une instance Suse Observability en cours d'ex√©cution) :
+
[source,bash]
----
sts stackpack test -d ./my-stackpack --yes
‚úÖ Starting stackpack test sequence...
  Stackpack: my-stackpack (current version: 0.0.1)

Step 1/5: Checking installed version...

Step 2/5: Creating temporary copy for testing...
‚úÖ ‚úì Temporary copy created

Step 3/5: Bumping version for testing...
‚úÖ ‚úì Version bumped to: 0.0.1-cli-test.10000

Step 4/5: Packaging stackpack...
‚úÖ ‚úì Stackpack packaged successfully!

Stackpack: my-stackpack (v0.0.1-cli-test.10000)
Zip file: /Users/viliakov/Workspace/src/github/stackstate-cli/my-stackpack/my-stackpack-0.0.1-cli-test.10000.zip
‚úÖ ‚úì Stackpack packaged successfully

Step 5/5: Uploading and installing/upgrading stackpack...
‚úÖ Uploaded StackPack: /Users/viliakov/Workspace/src/github/stackstate-cli/my-stackpack/my-stackpack-0.0.1-cli-test.10000.zip
NAME              | DISPLAY NAME      | VERSION
my-stackpack | my-stackpack | 0.0.1-cli-test.10000
‚úÖ ‚úì Stackpack uploaded successfully
‚úÖ StackPack instance installed
ID             | NAME | STATUS      | VERSION         | LAST UPDATED
274027256960772 | -    | PROVISIONING | 0.0.1-cli-test.1 | Fri Aug 29 09:10
                |      |              | 0000             | :26 2025 CEST
‚úÖ ‚úì Stackpack installed successfully

‚úÖ üéâ Test sequence completed successfully!
----

- La sous-commande `test` emballe, t√©l√©charge et installe votre StackPack avec un suffixe de version de test.
- It√©rez sur votre StackPack, en utilisant la commande `test` pour un retour rapide, apportez des modifications et observez le processus d'installation¬†/¬†mise √† niveau pour qu'il soit ex√©cut√© avec succ√®s. Examinez la topologie et la t√©l√©m√©trie ing√©r√©es dans l‚Äôinterface utilisateur de Suse Observability.

=== Emballez votre version finale de StackPack

La sous-commande `package` cr√©e un fichier zip √† partir des r√©pertoires de StackPack. Cette commande emballe tous les fichiers et r√©pertoires de StackPack requis dans une archive zip correctement nomm√©e pour la distribution et le d√©ploiement.

- Emballer votre StackPack dans un zip distribuable :
+
[source,bash]
----
sts stackpack package -d ./my-stackpack
‚úÖ ‚úì Stackpack packaged successfully!

Stackpack: stackpack (v0.0.1)
Zip file: /Users/viliakov/Workspace/src/github/stackstate-cli/my-stackpack/my-stackpack-0.0.1-cli-test.zip
----

- Pour sp√©cifier le fichier de sortie :
+
[source,bash]
----
sts stackpack package -d ./my-stackpack -f my-custom-archive.zip
----

=== T√©l√©chargez votre StackPack

La sous-commande `upload` pousse l'archive zip vers une instance {stackstate-product-name} en cours d‚Äôex√©cution.

- T√©l√©chargez l'archive vers {stackstate-product-name}¬†:
+
[source,bash]
----
sts stackpack upload -f ./my-stackpack-0.0.1.zip
‚úÖ ‚úì Stackpack uploaded successfully!
----

=== Installez le StackPack

xref:/stackpacks/about-stackpacks.adoc#_install_or_uninstall_a_stackpack[Installez ou mettez √† niveau votre StackPack] via l'interface utilisateur {stackstate-product-name} Stackpacks.

endif::ss-ff-stackpacks2_enabled[]
